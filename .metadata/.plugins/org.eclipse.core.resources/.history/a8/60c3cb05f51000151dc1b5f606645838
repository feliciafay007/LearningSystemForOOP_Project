package test1;

import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.List;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JTable;

/**
 *
 * @author feliciafay
 */
public class ResourceProcessor extends javax.swing.JPanel {
	//@Felicia
	private JTable jtable1; // the table displayed on the GUI
	//@Felicia--
	private ResourceController resourceController;
	private  String [] participants;
	private int roundQuestionNumberEachPerson;
	private int roundQuestionCounter;
	private List<Simpleresource> questionsList;
    /**
     * Creates new form ResourceProcessor
     */
    public ResourceProcessor() {
        //@Felicia
        resourceController= new ResourceController(this);
        initComponents();
        //initialize, should read from data base
        participants = new String [3];
        participants[0] = "Rohan";
        participants[1] = "Jie";
        participants[2] = "Wenyi";
        roundQuestionNumberEachPerson = 5;
        roundQuestionCounter = 0;
        questionsList = resourceController.getList();
        showOneQuestion();
    }


	  /**
	  * @Felicia set TextField
	  */    
	 public void setSecondLabel(String value) {
	 	jLabel2.setText(value);
	 }
	 
	 private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {                                          
	// 	String[] array = new String[jtable1.getColumnCount()];
	// 	array[0] = courseNameTxtField.getText();
	// 	array[1] = courseNumberTextField.getText();
	// 	array[2] = enrollmentTextField.getText();
	// 	array[3] = startDateTextField.getText();
	// 	array[4] = endDateTextField.getText();
	//	    courseListTableController.addRow( array);
	 	
	// 	test1
	// 	String current = resourceController.getRecord("202");
	// 	//setSecondLabel("123");
	// 	setSecondLabel(current);
	 	
	 	//test2
	 	String currentPath = resourceController.getFilePath("202");
	 	try {
	 		setSecondLabel(currentPath);
	 		BufferedImage wPic = ImageIO.read(new File(currentPath));
	 		//jLabel2= new JLabel(new ImageIcon(wPic));
	 		jLabel2.setIcon(new ImageIcon(wPic));
	 		playVideo();
	 	} catch (Exception e) {
	 		System.out.println(e.getMessage());
	 	}
	 }

	 private void playVideo() {
	 	//TwinkleTwinkleLittleStar.mp4
	 	//TwinkleTwinkleLittleStar.avi
	//     Player player = Manager.createPlayer( file.toURL() );
	//     player.addControllerListener( new EventHandler() );
	//     player.start();  // start player
	 }        
    
	 private void showOneQuestion() {
		 //string1 
		 Simpleresource simRes = questionsList.get(0);
		 String str =  simRes.getFilePath();
	     jLabelProgress.setText(str);
		 
		 //picture
		 try {
			 //Image img = ImageIO.read(getClass().getResource(str));
			 BufferedImage buttonIcon = ImageIO.read(new File(str));
			 jButtonQuestions.setIcon(new ImageIcon(buttonIcon));
		 } catch (IOException e) {
			 e.printStackTrace();
		 }
	 }
	 
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        buttonGroup1 = new javax.swing.ButtonGroup();
        jLableTitle = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabelProgress = new javax.swing.JLabel();
        jLabelStudentTerm = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();
        jButtonQuestions = new javax.swing.JButton();
        jRadioButtonOpts1 = new javax.swing.JRadioButton();
        jRadioButtonOpts2 = new javax.swing.JRadioButton();
        jRadioButtonOpts3 = new javax.swing.JRadioButton();
        jButtonNext = new javax.swing.JButton();

        jLableTitle.setText("Label:  Quizz Title");

        jLabel2.setText("jLabel2");

        jLabelProgress.setText("Label: Student Progress ");

        jLabelStudentTerm.setText("Label: Hint about student term");

        jButtonQuestions.setText("Questions");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(170, 170, 170)
                .addComponent(jButtonQuestions, javax.swing.GroupLayout.PREFERRED_SIZE, 312, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(178, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jButtonQuestions, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 299, Short.MAX_VALUE)
        );

        buttonGroup1.add(jRadioButtonOpts1);
        jRadioButtonOpts1.setText("jRadioButton1");
        jRadioButtonOpts1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButtonOpts1ActionPerformed(evt);
            }
        });

        buttonGroup1.add(jRadioButtonOpts2);
        jRadioButtonOpts2.setText("jRadioButton2");
        jRadioButtonOpts2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButtonOpts2ActionPerformed(evt);
            }
        });

        buttonGroup1.add(jRadioButtonOpts3);
        jRadioButtonOpts3.setText("jRadioButton3");
        jRadioButtonOpts3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jRadioButtonOpts3ActionPerformed(evt);
            }
        });

        jButtonNext.setText("Next");
        jButtonNext.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonNextActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(jLabelStudentTerm, javax.swing.GroupLayout.DEFAULT_SIZE, 811, Short.MAX_VALUE)
                            .addComponent(jLabelProgress, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLableTitle, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addGap(0, 0, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(layout.createSequentialGroup()
                                        .addComponent(jRadioButtonOpts1)
                                        .addGap(143, 143, 143)
                                        .addComponent(jRadioButtonOpts2)
                                        .addGap(113, 113, 113)
                                        .addComponent(jRadioButtonOpts3)))
                                .addGap(0, 1192, Short.MAX_VALUE)))))
                .addContainerGap())
            .addGroup(layout.createSequentialGroup()
                .addGap(281, 281, 281)
                .addComponent(jButtonNext)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(11, 11, 11)
                .addComponent(jLableTitle, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jLabelProgress, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jLabelStudentTerm, javax.swing.GroupLayout.PREFERRED_SIZE, 39, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jRadioButtonOpts1)
                    .addComponent(jRadioButtonOpts2)
                    .addComponent(jRadioButtonOpts3))
                .addGap(18, 18, 18)
                .addComponent(jButtonNext)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }// </editor-fold>                        

    private void jRadioButtonOpts1ActionPerformed(java.awt.event.ActionEvent evt) {                                                  
        // TODO add your handling code here:
    }       
    
    private void jRadioButtonOpts2ActionPerformed(java.awt.event.ActionEvent evt) {                                                  
        // TODO add your handling code here:
    }                                                 

    private void jRadioButtonOpts3ActionPerformed(java.awt.event.ActionEvent evt) {                                                  
        // TODO add your handling code here:
    }                                                 
    
    private void jButtonNextActionPerformed(java.awt.event.ActionEvent evt) {                                            
    	++roundQuestionCounter;
    	roundQuestionCounter = Math.min(roundQuestionCounter, roundQuestionNumberEachPerson);
    }              


    // Variables declaration - do not modify                     
    private javax.swing.ButtonGroup buttonGroup1;
    private javax.swing.JButton jButtonNext;
    private javax.swing.JButton jButtonQuestions;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabelProgress;
    private javax.swing.JLabel jLabelStudentTerm;
    private javax.swing.JLabel jLableTitle;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JRadioButton jRadioButtonOpts1;
    private javax.swing.JRadioButton jRadioButtonOpts2;
    private javax.swing.JRadioButton jRadioButtonOpts3;
    // End of variables declaration                   
}